<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <div class="header-upper">
            <div class="container">
                <div class="header-content">
                    <div class="header-logo">
                        <img src="/images/logo.png" alt="Uygur Haber Ajansı">
                    </div>
                    <div class="header-branding">
                        <h1><a href="/">Uygur Haber Ajansı</a></h1>
                        <p class="tagline">AI Destekli Haber Platformu</p>
                    </div>
                    <div class="header-widgets">
                        <!-- Widget area for future use -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="header-lower">
            <div class="container">
                <nav class="nav-container">
                    <ul class="nav-tabs">
                        <% navigation.tabs.forEach(tab => { %>
                            <li>
                                <a href="<%= tab.url %>" class="<%= tab.active ? 'active' : '' %>">
                                    <%= tab.name %>
                                </a>
                            </li>
                        <% }); %>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <% if (news && news.length > 0) { %>
                <div class="news-grid">
                    <% news.forEach((article, index) => { %>
                        <article class="news-card">
                            <% if (article.image) { %>
                                <div class="news-image">
                                    <img src="<%= article.image %>" alt="<%= article.title %>" loading="lazy">
                                </div>
                            <% } %>
                            <div class="news-content">
                                <h2 class="news-title">
                                    <a href="/news/<%= index %>"><%= article.title %></a>
                                </h2>
                                <span class="news-date"><%= new Date(article.published).toLocaleDateString('tr-TR') %></span>
                                <p class="news-summary"><%= article.summary %></p>
                                <a href="/news/<%= index %>" class="read-more">Devamını Oku</a>
                            </div>
                        </article>
                    <% }); %>
                </div>
            <% } else { %>
                <div class="no-news">
                    <h2>Henüz haber yok</h2>
                    <p>Şu anda görüntülenecek haber bulunmamaktadır.</p>
                </div>
            <% } %>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Uygur Haber Ajansı. Tüm hakları saklıdır.</p>
        </div>
    </footer>

    <script>
        // Fetch more news functionality
        async function fetchMoreNews() {
            try {
                const response = await fetch('/api/fetch-more');
                const data = await response.json();
                
                if (data.success) {
                    // Reload page to show new news
                    window.location.reload();
                } else {
                    console.log('No more news available');
                }
            } catch (error) {
                console.error('Error fetching more news:', error);
            }
        }

        // Add fetch more button if needed
        document.addEventListener('DOMContentLoaded', function() {
            const newsGrid = document.querySelector('.news-grid');
            if (newsGrid && newsGrid.children.length > 0) {
                const fetchMoreBtn = document.createElement('button');
                fetchMoreBtn.textContent = 'Daha Fazla Haber Yükle';
                fetchMoreBtn.className = 'btn-fetch-more';
                fetchMoreBtn.style.cssText = `
                    display: block;
                    margin: 2rem auto;
                    padding: 1rem 2rem;
                    background: var(--primary-color);
                    color: white;
                    border: none;
                    border-radius: 6px;
                    font-size: 1rem;
                    cursor: pointer;
                    transition: background 0.3s ease;
                `;
                fetchMoreBtn.onclick = fetchMoreNews;
                newsGrid.parentNode.appendChild(fetchMoreBtn);
            }
        });
    </script>
</body>
</html>
