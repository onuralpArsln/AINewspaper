<!-- Video Overlay -->
<style>
    .video-loader-overlay {
        position: fixed;
        inset: 0;
        z-index: 9999;
        display: grid;
        place-items: center;
        background: rgba(0, 0, 0, 0.75);
        transition: opacity 400ms ease, visibility 400ms ease;
    }

    .video-loader-overlay.hide {
        opacity: 0;
        visibility: hidden;
    }

    .video-container {
        position: relative;
        /* Aspect ratio preservation from original request (9/16) */
        width: min(60vw, 22rem);
        max-width: min(90vw, 28rem);
        aspect-ratio: 9 / 16;
    }

    .video-loader-overlay video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        /* Ensures video covers the container */
        border-radius: clamp(0.5rem, 2vw, 1rem);
        box-shadow: 0 1.5rem 3rem rgba(0, 0, 0, 0.35);
        display: block;
    }

    .close-button {
        position: absolute;
        top: -15px;
        right: -15px;
        width: 32px;
        height: 32px;
        background: white;
        border: 2px solid #333;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        line-height: 1;
        font-weight: bold;
        color: #333;
        z-index: 10000;
        padding: 0;
        transition: transform 0.2s;
    }

    .close-button:hover {
        transform: scale(1.1);
        background: #f0f0f0;
    }

    @media (max-width: 600px) {
        .video-container {
            width: min(80vw, 18rem);
        }
    }
</style>

<script>
    (() => {
        const overlayId = "video-loader-overlay";
        // REPLACE THIS URL WITH YOUR ACTUAL VIDEO URL
        const videoUrl = "https://www.w3schools.com/html/mov_bbb.mp4";

        if (document.getElementById(overlayId)) return;

        const overlay = document.createElement("div");
        overlay.id = overlayId;
        overlay.className = "video-loader-overlay";
        overlay.setAttribute("role", "dialog");
        overlay.setAttribute("aria-modal", "true");

        const container = document.createElement("div");
        container.className = "video-container";

        const video = document.createElement("video");
        video.src = videoUrl;
        video.autoplay = true;
        video.muted = true; // Muted is often required for autoplay to work without user interaction
        video.playsInline = true; // For mobile support

        // Optional: Add controls if user wants to play/pause manually
        // video.controls = true; 

        // Close button
        const closeBtn = document.createElement("button");
        closeBtn.className = "close-button";
        closeBtn.innerHTML = "&times;";
        closeBtn.ariaLabel = "Close video";
        closeBtn.title = "Close";

        container.appendChild(video);
        container.appendChild(closeBtn);
        overlay.appendChild(container);

        const closeOverlay = () => {
            overlay.classList.add("hide");

            // Stop video to save resources
            video.pause();

            overlay.addEventListener(
                "transitionend",
                () => overlay.remove(),
                { once: true }
            );
        };

        const injectOverlay = () => {
            document.body.appendChild(overlay);

            // Event 1: Close when video ends
            video.addEventListener("ended", closeOverlay);

            // Event 2: Close when X is clicked
            closeBtn.addEventListener("click", closeOverlay);

            // Attempt to play content (handles some browser autoplay policies)
            video.play().catch(error => {
                console.warn("Video autoplay failed:", error);
                // If autoplay fails, we might want to show play controls or just let it be.
                video.controls = true;
            });
        };

        if (document.body) {
            injectOverlay();
        } else {
            document.addEventListener("DOMContentLoaded", injectOverlay, {
                once: true,
            });
        }
    })();
</script>